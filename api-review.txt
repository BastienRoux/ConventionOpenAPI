openapi: 3.1.0
info:
  title: API de gestion de reviews
  description: API pour la gestion des avis et notes sur les films.
  version: 1.0.0

servers:
  - url: http://localhost:8000/api
    description: Serveur de test

paths:
  /reviews:
    get:
      summary: Liste toutes les reviews
      description: Renvoie une liste de toutes les reviews dans la base de données.
      responses:
        '200':
          description: Une liste de reviews
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/Review'
    post:
      summary: Ajoute une nouvelle review
      description: Ajoute une nouvelle review à la base de données.
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/Review'
      responses:
        '201':
          description: Review créée avec succès
        '400':
          description: Requête invalide
  /reviews/{id}:
    get:
      summary: Trouver une review par son ID
      description: Renvoie une review spécifique identifiée par son ID.
      parameters:
        - name: id
          in: path
          required: true
          description: L'ID de la review à trouver.
          schema:
            type: string
      responses:
        '200':
          description: Détails d'une review
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Review'
        '404':
          description: Review non trouvée
    put:
      summary: Met à jour une review
      description: Met à jour les informations d'une review spécifique.
      parameters:
        - name: id
          in: path
          required: true
          description: L'ID de la review à mettre à jour.
          schema:
            type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/Review'
      responses:
        '200':
          description: Review mise à jour avec succès
        '404':
          description: Review non trouvée
        '400':
          description: Requête invalide
    delete:
      summary: Supprime une review
      description: Supprime une review spécifique de la base de données.
      parameters:
        - name: id
          in: path
          required: true
          description: L'ID de la review à supprimer.
          schema:
            type: string
      responses:
        '200':
          description: Review supprimée avec succès
        '404':
          description: Review non trouvée
components:
  schemas:
    Review:
      type: object
      required:
        - id
        - filmId
        - note
      properties:
        id:
          type: string
          description: L'identifiant unique de la review.
        filmId:
          type: string
          description: L'identifiant du film concerné par la review.
        utilisateurId:
          type: string
          description: L'identifiant de l'utilisateur ayant posté la review.
        note:
          type: number
          format: float
          minimum: 0
          maximum: 10
          description: La note attribuée au film (de 0 à 10).
        titre:
          type: string
          description: Le titre de la review.
        commentaire:
          type: string
          description: Le commentaire détaillé de la review.
        datePublication:
          type: string
          format: date-time
          description: La date et heure de publication de la review.